//created on: Feb 25, 2013
package com.hcentive.eligibility.determination;

import com.hcentive.rulesengine.domain.EEDeterminationRuleFacts;
import com.hcentive.eligibility.domain.ext.program_status;
import com.hcentive.rulesengine.domain.EEDeterminationRuleFacts.noSSNReasonCodeType;
import com.hcentive.eligibility.ext.CitizenshipStatusEnum;
import com.hcentive.eligibility.ext.UserMECResponseEnum;
import com.hcentive.eligibility.EligibilityVerificationTypeEnum;
import com.hcentive.eligibility.ext.ClockNameEnum;
import com.hcentive.utils.ext.HXConstants;
import com.hcentive.utils.ext.HXUtility;
import com.hcentive.eligibility.domain.ext.ProgramReasonCode;
import com.hcentive.eligibility.domain.ext.ProgramCode;

global org.slf4j.Logger logger;


rule "MAIN_EPP_VERIFY_SEC2"
salience 100000
	when
		$eDeterminationfacts : EEDeterminationRuleFacts();
	then
		logger.debug("Rule : MAIN_EPP_VERIFY_SEC2 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "MAIN_EPP_VERIFY_SEC2");
		$eDeterminationfacts.setRuleExecCompletionStep(ProgramCode.EPP, HXConstants.RULE_EXEC_STEP_SEC1_03_ACK);
		drools.setFocus("EPP_VERIFY_SEC2_STALE_1_AG");
		logger.debug("Rule : MAIN_EPP_VERIFY_SEC2 : End");
end


//CR1606
rule "EPP_VERIFY_SEC2_VERIFY_STALE_ELG_SEC_01"
salience 95060
activation-group "EPP_VERIFY_SEC2_STALE_1_AT"
agenda-group "EPP_VERIFY_SEC2_STALE_1_AG"
	when
		$eDeterminationfacts : EEDeterminationRuleFacts(isStaleEligibility);
		//eval(true);		
	then
		logger.debug("Rule : EPP_VERIFY_SEC2_VERIFY_STALE_ELG_SEC_01 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_VERIFY_SEC2_VERIFY_STALE_ELG_SEC_01");
		$eDeterminationfacts.setRuleExecCompletionStep(ProgramCode.EPP, HXConstants.RULE_EXEC_STEP_SEC2_03);
		logger.debug("Rule : EPP_VERIFY_SEC2_VERIFY_STALE_ELG_SEC_01 : End");
end

rule "EPP_VERIFY_SEC2_VERIFY_STALE_ELG_SEC_03"
salience 95050
activation-group "EPP_VERIFY_SEC2_STALE_1_AT"
agenda-group "EPP_VERIFY_SEC2_STALE_1_AG"
	when
		$eDeterminationfacts : EEDeterminationRuleFacts(!isStaleEligibility);
		//eval(true);		
	then
		logger.debug("Rule : EPP_VERIFY_SEC2_VERIFY_STALE_ELG_SEC_03 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_VERIFY_SEC2_VERIFY_STALE_ELG_SEC_03");
		drools.setFocus("EPP_RULE_FLIP_AG");
		logger.debug("Rule : EPP_VERIFY_SEC2_VERIFY_STALE_ELG_SEC_03 : End");
end

//CR1606 code changes end

rule "EPP_RULE_FLIP_INCAR"
salience 2002
activation-group "EPP_RULE_FLIP_AT"
agenda-group "EPP_RULE_FLIP_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts("EPP_INCAR_1_AG".equals(isRunRequiredForSheet));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_RULE_FLIP_INCAR : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_RULE_FLIP_INCAR");
		drools.setFocus("EPP_INCAR_1_AG");
		logger.debug("Rule : EPP_RULE_FLIP_INCAR : End");
end 

rule "EPP_RULE_FLIP_IMIG"
salience 2001
activation-group "EPP_RULE_FLIP_AT"
agenda-group "EPP_RULE_FLIP_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!("EPP_INCAR_1_AG".equals(isRunRequiredForSheet)));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_RULE_FLIP_IMIG : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_RULE_FLIP_IMIG");
		drools.setFocus("EPP_IMIG_1_AG");
		logger.debug("Rule : EPP_RULE_FLIP_IMIG : End");
end

//EPP immigration(1)

rule "EPP_Immigration_1_1"
salience 15000
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(CitizenshipStatusEnum.US_CITIZEN.equals(citizenshipType) || 
														CitizenshipStatusEnum.NATURALIZED_CITIZEN.equals(citizenshipType));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_1 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_1");		
		drools.setFocus("EPP_INCAR_1_AG");
		logger.debug("Rule : EPP_Immigration_1_1 : End");
end

rule "EPP_Immigration_1_1A"
salience 14999
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts((CitizenshipStatusEnum.IMMIGRANT_NON_CITIZEN.equals(citizenshipType) || 
														CitizenshipStatusEnum.NON_IMMIGRANT_VISA_HOLDER.equals(citizenshipType)),
														isCSVLPOvrideLessThanThldDaysOrKeyChg,
														!getMedicaidAliessaInd());
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_1A : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_1A");
		drools.setFocus("EPP_IMIG_2V2_AG");
		drools.setFocus("EPP_IMIG_1a_AG");
		logger.debug("Rule : EPP_Immigration_1_1A : End");
end

rule "EPP_Immigration_1_1B"
salience 14998
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts((CitizenshipStatusEnum.IMMIGRANT_NON_CITIZEN.equals(citizenshipType) || 
														CitizenshipStatusEnum.NON_IMMIGRANT_VISA_HOLDER.equals(citizenshipType)),
														isCSVLPOvrideLessThanThldDaysOrKeyChg,
														getMedicaidAliessaInd());
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_1B : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_1B");
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setEppAliessaInd(Boolean.TRUE);
		drools.setFocus("EPP_IMIG_2V2_AG");
		drools.setFocus("EPP_IMIG_1a_AG");
		logger.debug("Rule : EPP_Immigration_1_1B : End");
end


rule "EPP_Immigration_1_1C"
salience 14997
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts((CitizenshipStatusEnum.IMMIGRANT_NON_CITIZEN.equals(citizenshipType) || 
														CitizenshipStatusEnum.NON_IMMIGRANT_VISA_HOLDER.equals(citizenshipType)),
														HXConstants.INDICATOR_YES.equals(vlpUSCitizenCode));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_1C : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_1C");
		drools.setFocus("EPP_IMIG_4_AG");
		logger.debug("Rule : EPP_Immigration_1_1C : End");
end


rule "EPP_Immigration_1_2"
salience 14995
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>

		$eDeterminationfacts : EEDeterminationRuleFacts((CitizenshipStatusEnum.IMMIGRANT_NON_CITIZEN.equals(citizenshipType) || 
												CitizenshipStatusEnum.NON_IMMIGRANT_VISA_HOLDER.equals(citizenshipType)),
												isHIXRestricted);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_2 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_2");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, program_status.INELIGIBLE, ProgramReasonCode.CISF);
		drools.setFocus("EPP_INCAR_1_AG");
		drools.setFocus("EPP_IMIG_1a_AG");
		logger.debug("Rule : EPP_Immigration_1_2 : End");
end

rule "EPP_Immigration_1_3"
salience 14990
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts((CitizenshipStatusEnum.IMMIGRANT_NON_CITIZEN.equals(citizenshipType) || 
														CitizenshipStatusEnum.NON_IMMIGRANT_VISA_HOLDER.equals(citizenshipType)),
														(isMissing_Alien_and_I94_data && !getMedicaidAliessaInd() && !isCSVLPOverride));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_3 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_3");		
		drools.setFocus("EPP_IMIG_2V2_AG");
		drools.setFocus("EPP_IMIG_1a_AG");
		logger.debug("Rule : EPP_Immigration_1_3 : End");
end

rule "EPP_Immigration_1_3A"
salience 14989
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts((CitizenshipStatusEnum.IMMIGRANT_NON_CITIZEN.equals(citizenshipType) || 
														CitizenshipStatusEnum.NON_IMMIGRANT_VISA_HOLDER.equals(citizenshipType)),
														(isMissing_Alien_and_I94_data && getMedicaidAliessaInd() && !isCSVLPOverride));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_3A : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_3A");	
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setEppAliessaInd(Boolean.TRUE);
		drools.setFocus("EPP_IMIG_2V2_AG");
		drools.setFocus("EPP_IMIG_1a_AG");
		logger.debug("Rule : EPP_Immigration_1_3A : End");
end

rule "EPP_Immigration_1_4"
salience 14987
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts((CitizenshipStatusEnum.IMMIGRANT_NON_CITIZEN.equals(citizenshipType) || 
														CitizenshipStatusEnum.NON_IMMIGRANT_VISA_HOLDER.equals(citizenshipType)),
														isFailureToProvideImmiDocInd);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_4 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_4");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, program_status.INELIGIBLE, ProgramReasonCode.FVIS);
		drools.setFocus("EPP_IMIG_4_AG");
		drools.setFocus("EPP_IMIG_1a_AG");
		logger.debug("Rule : EPP_Immigration_1_4 : End");
end


rule "EPP_Immigration_1_4_1"
salience 14986
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts((CitizenshipStatusEnum.IMMIGRANT_NON_CITIZEN.equals(citizenshipType) || 
														CitizenshipStatusEnum.NON_IMMIGRANT_VISA_HOLDER.equals(citizenshipType)),
														!isFailureToProvideImmiDocInd,
														getIsHIXPrucol(),
														!getIsPrucolVerReqInd(),
														!getMedicaidAliessaInd());
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_4_1 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_4_1");
		drools.setFocus("EPP_IMIG_4_AG");
		drools.setFocus("EPP_IMIG_1a_AG");
		logger.debug("Rule : EPP_Immigration_1_4_1 : End");
end

rule "EPP_Immigration_1_4_2"
salience 14985
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts((CitizenshipStatusEnum.IMMIGRANT_NON_CITIZEN.equals(citizenshipType) || 
														CitizenshipStatusEnum.NON_IMMIGRANT_VISA_HOLDER.equals(citizenshipType)),
														!isFailureToProvideImmiDocInd,
														getIsHIXPrucol(),
														!getIsPrucolVerReqInd(),
														getMedicaidAliessaInd());
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_4_2 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_4_2");
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setEppAliessaInd(Boolean.TRUE);
		drools.setFocus("EPP_IMIG_4_AG");
		drools.setFocus("EPP_IMIG_1a_AG");
		logger.debug("Rule : EPP_Immigration_1_4_2 : End");
end



rule "EPP_Immigration_1_4A_1"
salience 14984
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts((CitizenshipStatusEnum.IMMIGRANT_NON_CITIZEN.equals(citizenshipType) || 
														CitizenshipStatusEnum.NON_IMMIGRANT_VISA_HOLDER.equals(citizenshipType)),
														!isFailureToProvideImmiDocInd,
														getIsHIXPrucol(),
														getIsPrucolVerReqInd(),
														!getMedicaidAliessaInd());
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_4A_1 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_4A_1");
		drools.setFocus("EPP_IMIG_2V1_AG");
		drools.setFocus("EPP_IMIG_1a_AG");
		logger.debug("Rule : EPP_Immigration_1_4A_1 : End");
end

rule "EPP_Immigration_1_4A_2"
salience 14983
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts((CitizenshipStatusEnum.IMMIGRANT_NON_CITIZEN.equals(citizenshipType) || 
														CitizenshipStatusEnum.NON_IMMIGRANT_VISA_HOLDER.equals(citizenshipType)),
														!isFailureToProvideImmiDocInd,
														getIsHIXPrucol(),
														getIsPrucolVerReqInd(),
														getMedicaidAliessaInd());
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_4A_2 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_4A_2");
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setEppAliessaInd(Boolean.TRUE);
		drools.setFocus("EPP_IMIG_2V1_AG");
		drools.setFocus("EPP_IMIG_1a_AG");
		logger.debug("Rule : EPP_Immigration_1_4A_2 : End");
end

// Added for the CR 1455
rule "EPP_Immigration_1_4A_3"
salience 14980
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts((CitizenshipStatusEnum.IMMIGRANT_NON_CITIZEN.equals(citizenshipType) || 
														CitizenshipStatusEnum.NON_IMMIGRANT_VISA_HOLDER.equals(citizenshipType)),
														!isFailureToProvideImmiDocInd,
														!getIsHIXPrucol(),
														!HXConstants.LAWFUL_PRESENCE_PENDING.equals(isMemberLawfullyPresent),
														HXConstants.LAWFUL_PRESENCE_VERIFIED.equals(isMemberLawfullyPresent),
														!HXConstants.LAWFUL_PRESENCE_NOT_VERIFIED.equals(isMemberLawfullyPresent),
														HXConstants.QUALIFIED_NONCITIZEN_INDICATOR_Y.equals(isQualifiedNonCitizenStr),
														!HXConstants.QUALIFIED_NONCITIZEN_INDICATOR_P.equals(isQualifiedNonCitizenStr),
														!HXConstants.QUALIFIED_NONCITIZEN_INDICATOR_N.equals(isQualifiedNonCitizenStr),
														getMedicaidAliessaInd());
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_4A_3 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_4A_3");
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setEppAliessaInd(Boolean.TRUE);
	   drools.setFocus("EPP_IMIG_3_AG");
        drools.setFocus("EPP_IMIG_1a_AG");
		//drools.setFocus("EPP_SEC_2_1_NEW_COMP_STEP_AG");
		logger.debug("Rule : EPP_Immigration_1_4A_3 : End");
end


//Added for CRR 1234 for usecase 7
rule "EPP_Immigration_1_4B"
salience 14978
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts((CitizenshipStatusEnum.IMMIGRANT_NON_CITIZEN.equals(citizenshipType) || 
														CitizenshipStatusEnum.NON_IMMIGRANT_VISA_HOLDER.equals(citizenshipType)),
														!isFailureToProvideImmiDocInd,
														!getIsHIXPrucol(),
														HXConstants.LAWFUL_PRESENCE_PENDING.equals(isMemberLawfullyPresent),
														!isVLPStepThreeComplete,
														!isVLPStepTwo,
														!(HXConstants.INDICATOR_NO.equals(dhsAutoTriggerStepTwo) || HXConstants.INDICATOR_NO.equals(dhsAutoTriggerStepThree)),
														!getMedicaidAliessaInd());
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_4B : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_4B");
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setStartClockNoNoticeInd(Boolean.TRUE);
		drools.setFocus("EPP_IMIG_2V1_AG");
		drools.setFocus("EPP_IMIG_1a_AG");
		logger.debug("Rule : EPP_Immigration_1_4B : End");
end

rule "EPP_Immigration_1_4C"
salience 14976
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts((CitizenshipStatusEnum.IMMIGRANT_NON_CITIZEN.equals(citizenshipType) || 
														CitizenshipStatusEnum.NON_IMMIGRANT_VISA_HOLDER.equals(citizenshipType)),
														!isFailureToProvideImmiDocInd,
														!getIsHIXPrucol(),
														HXConstants.LAWFUL_PRESENCE_PENDING.equals(isMemberLawfullyPresent),
														!isVLPStepThreeComplete,
														!isVLPStepTwo,
														!(HXConstants.INDICATOR_NO.equals(dhsAutoTriggerStepTwo) || HXConstants.INDICATOR_NO.equals(dhsAutoTriggerStepThree)),
														getMedicaidAliessaInd());
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_4C : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_4C");
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setStartClockNoNoticeInd(Boolean.TRUE);
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setEppAliessaInd(Boolean.TRUE);
		drools.setFocus("EPP_IMIG_2V1_AG");
		drools.setFocus("EPP_IMIG_1a_AG");
		logger.debug("Rule : EPP_Immigration_1_4C : End");
end

rule "EPP_Immigration_1_5"
salience 14974
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts((CitizenshipStatusEnum.IMMIGRANT_NON_CITIZEN.equals(citizenshipType) || 
														CitizenshipStatusEnum.NON_IMMIGRANT_VISA_HOLDER.equals(citizenshipType)),
														!isFailureToProvideImmiDocInd,
														!getIsHIXPrucol(),
														HXConstants.LAWFUL_PRESENCE_PENDING.equals(isMemberLawfullyPresent),
														!isVLPStepTwo,
														!(HXConstants.INDICATOR_NO.equals(dhsAutoTriggerStepTwo) || HXConstants.INDICATOR_NO.equals(dhsAutoTriggerStepThree)),
														!getMedicaidAliessaInd());
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_5 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_5");
		drools.setFocus("EPP_IMIG_2V1_AG");
		drools.setFocus("EPP_IMIG_1a_AG");
		logger.debug("Rule : EPP_Immigration_1_5 : End");
end

rule "EPP_Immigration_1_5_A"
salience 14972
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts((CitizenshipStatusEnum.IMMIGRANT_NON_CITIZEN.equals(citizenshipType) || 
														CitizenshipStatusEnum.NON_IMMIGRANT_VISA_HOLDER.equals(citizenshipType)),
														!isFailureToProvideImmiDocInd,
														!getIsHIXPrucol(),
														HXConstants.LAWFUL_PRESENCE_PENDING.equals(isMemberLawfullyPresent),
														!isVLPStepTwo,
														!(HXConstants.INDICATOR_NO.equals(dhsAutoTriggerStepTwo) || HXConstants.INDICATOR_NO.equals(dhsAutoTriggerStepThree)),
														getMedicaidAliessaInd());
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_5_A : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_5_A");
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setEppAliessaInd(Boolean.TRUE);
		drools.setFocus("EPP_IMIG_2V1_AG");
		drools.setFocus("EPP_IMIG_1a_AG");
		logger.debug("Rule : EPP_Immigration_1_5_A : End");
end

rule "EPP_Immigration_1_5_B"
salience 14970
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts((CitizenshipStatusEnum.IMMIGRANT_NON_CITIZEN.equals(citizenshipType) || 
														CitizenshipStatusEnum.NON_IMMIGRANT_VISA_HOLDER.equals(citizenshipType)),
														!isFailureToProvideImmiDocInd,
														!getIsHIXPrucol(),
														HXConstants.LAWFUL_PRESENCE_PENDING.equals(isMemberLawfullyPresent),
														isVLPStepTwo,
														!(HXConstants.INDICATOR_NO.equals(dhsAutoTriggerStepTwo) || HXConstants.INDICATOR_NO.equals(dhsAutoTriggerStepThree)),
														!getMedicaidAliessaInd());
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_5B : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_5B");
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setImmigCSManualResolveInd(Boolean.TRUE);
		drools.setFocus("EPP_IMIG_2V1_AG");
		drools.setFocus("EPP_IMIG_1a_AG");
		logger.debug("Rule : EPP_Immigration_1_5B : End");
end

rule "EPP_Immigration_1_5_C"
salience 14968
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts((CitizenshipStatusEnum.IMMIGRANT_NON_CITIZEN.equals(citizenshipType) || 
														CitizenshipStatusEnum.NON_IMMIGRANT_VISA_HOLDER.equals(citizenshipType)),
														!isFailureToProvideImmiDocInd,
														!getIsHIXPrucol(),
														HXConstants.LAWFUL_PRESENCE_PENDING.equals(isMemberLawfullyPresent),
														isVLPStepTwo,
														!(HXConstants.INDICATOR_NO.equals(dhsAutoTriggerStepTwo) || HXConstants.INDICATOR_NO.equals(dhsAutoTriggerStepThree)),
														getMedicaidAliessaInd());
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_5_C : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_5_C");
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setImmigCSManualResolveInd(Boolean.TRUE);
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setEppAliessaInd(Boolean.TRUE);
		drools.setFocus("EPP_IMIG_2V1_AG");
		drools.setFocus("EPP_IMIG_1a_AG");
		logger.debug("Rule : EPP_Immigration_1_5_C : End");
end




rule "EPP_Immigration_1_6"
salience 14966
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts((CitizenshipStatusEnum.IMMIGRANT_NON_CITIZEN.equals(citizenshipType) || 
														CitizenshipStatusEnum.NON_IMMIGRANT_VISA_HOLDER.equals(citizenshipType)),
														!isFailureToProvideImmiDocInd,
														!getIsHIXPrucol(),
														HXConstants.LAWFUL_PRESENCE_PENDING.equals(isMemberLawfullyPresent),
														(HXConstants.INDICATOR_NO.equals(dhsAutoTriggerStepTwo) || HXConstants.INDICATOR_NO.equals(dhsAutoTriggerStepThree)),
														!getMedicaidAliessaInd());
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_6 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_6");
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setImmigCSManualResolveInd(Boolean.TRUE);
		drools.setFocus("EPP_IMIG_2V1_AG");
		drools.setFocus("EPP_IMIG_1a_AG");
		logger.debug("Rule : EPP_Immigration_1_6 : End");
end

rule "EPP_Immigration_1_6_A"
salience 14964
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts((CitizenshipStatusEnum.IMMIGRANT_NON_CITIZEN.equals(citizenshipType) || 
														CitizenshipStatusEnum.NON_IMMIGRANT_VISA_HOLDER.equals(citizenshipType)),
														!isFailureToProvideImmiDocInd,
														!getIsHIXPrucol(),
														HXConstants.LAWFUL_PRESENCE_PENDING.equals(isMemberLawfullyPresent),
														(HXConstants.INDICATOR_NO.equals(dhsAutoTriggerStepTwo) || HXConstants.INDICATOR_NO.equals(dhsAutoTriggerStepThree)),
														getMedicaidAliessaInd());
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_6_A : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_6_A");
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setImmigCSManualResolveInd(Boolean.TRUE);
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setEppAliessaInd(Boolean.TRUE);
		drools.setFocus("EPP_IMIG_2V1_AG");
		drools.setFocus("EPP_IMIG_1a_AG");
		logger.debug("Rule : EPP_Immigration_1_6_A : End");
end

rule "EPP_Immigration_1_7"
salience 14962
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts((CitizenshipStatusEnum.IMMIGRANT_NON_CITIZEN.equals(citizenshipType) || 
														CitizenshipStatusEnum.NON_IMMIGRANT_VISA_HOLDER.equals(citizenshipType)),
														!isFailureToProvideImmiDocInd,
														!getIsHIXPrucol(),
														HXConstants.LAWFUL_PRESENCE_VERIFIED.equals(isMemberLawfullyPresent),
														!getMedicaidAliessaInd());
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_7 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_7");
		drools.setFocus("EPP_IMIG_4_AG");
		drools.setFocus("EPP_IMIG_1a_AG");
		logger.debug("Rule : EPP_Immigration_1_7 : End");
end



rule "EPP_Immigration_1_8"
salience 14959
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts((CitizenshipStatusEnum.IMMIGRANT_NON_CITIZEN.equals(citizenshipType) || 
														CitizenshipStatusEnum.NON_IMMIGRANT_VISA_HOLDER.equals(citizenshipType)),
														!isFailureToProvideImmiDocInd,
														!getIsHIXPrucol(),
														HXConstants.LAWFUL_PRESENCE_VERIFIED.equals(isMemberLawfullyPresent),
														getMedicaidAliessaInd());
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_8 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_8");
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setEppAliessaInd(Boolean.TRUE);
		drools.setFocus("EPP_IMIG_4_AG");
		drools.setFocus("EPP_IMIG_1a_AG");
		logger.debug("Rule : EPP_Immigration_1_8 : End");
end


rule "EPP_Immigration_1_9"
salience 14957
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts((CitizenshipStatusEnum.IMMIGRANT_NON_CITIZEN.equals(citizenshipType) || 
														CitizenshipStatusEnum.NON_IMMIGRANT_VISA_HOLDER.equals(citizenshipType)),
														!isFailureToProvideImmiDocInd,
														!getIsHIXPrucol(),
														HXConstants.LAWFUL_PRESENCE_NOT_VERIFIED.equals(isMemberLawfullyPresent));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_9 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_9");
		drools.setFocus("EPP_IMIG_2V1_AG");
		drools.setFocus("EPP_IMIG_1a_AG");
		logger.debug("Rule : EPP_Immigration_1_9 : End");
end

rule "EPP_Immigration_1_10"
salience 14955
activation-group "EPP_IMIG_1_AT"
agenda-group "EPP_IMIG_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(CitizenshipStatusEnum.OTHER.equals(citizenshipType));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1_10 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1_10");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, program_status.INELIGIBLE, ProgramReasonCode.CISF);
		drools.setFocus("EPP_INCAR_1_AG");
		logger.debug("Rule : EPP_Immigration_1_10 : End");
end


// Added for CR1151
//EPP Immigration (1a)

rule "EPP_Immigration_1a_1"
salience 14950
activation-group "EPP_IMIG_1a_AT"
agenda-group "EPP_IMIG_1a_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(isMedicaidDeemedCitizenship);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1a_1 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1a_1");
		$eDeterminationfacts.getMember().setIsMedicaidDeemedCitizen(Boolean.FALSE); 
		logger.debug("Rule : EPP_Immigration_1a_1 : End");
end

rule "EPP_Immigration_1a_2"
salience 14945
activation-group "EPP_IMIG_1a_AT"
agenda-group "EPP_IMIG_1a_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!(isMedicaidDeemedCitizenship));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_1a_2 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_1a_2");
		logger.debug("Rule : EPP_Immigration_1a_2 : End");
end

//EPP Immigration(2) - Version1
//flow 2->4->exit
rule "EPP_Immigration_2V1_1"
salience 9995
activation-group "EPP_IMIG_2V1_AT"
agenda-group "EPP_IMIG_2V1_AG"
when
	//<CONDITION>
	$eDeterminationfacts : EEDeterminationRuleFacts(isProposedElgForRenewal);
then
	//<ACTIONS>
	logger.debug("Rule : EPP_Immigration_2V1_1 : Begin");
	$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V1_1");
	$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setManualRenewalInd(Boolean.TRUE);
	$eDeterminationfacts.updateProgram(ProgramCode.EPP,program_status.INELIGIBLE, ProgramReasonCode.MRR);
	drools.setFocus("EPP_IMIG_4_AG");
	logger.debug("Rule : EPP_Immigration_2V1_1 : End");
end

rule "EPP_Immigration_2V1_2"
salience 9990
activation-group "EPP_IMIG_2V1_AT"
agenda-group "EPP_IMIG_2V1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														isCSVLPOverride);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2V1_2 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V1_2");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, program_status.INELIGIBLE, ProgramReasonCode.VDSNLP);
		drools.setFocus("EPP_IMIG_4_AG");
		logger.debug("Rule : EPP_Immigration_2V1_2 : End");
end

rule "EPP_Immigration_2V1_3"
salience 9985
activation-group "EPP_IMIG_2V1_AT"
agenda-group "EPP_IMIG_2V1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														!isCSVLPOverride,
														isMissing_Alien_and_I94_data,
														!isImigVerificationNoticeSent);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2V1_3 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V1_3");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.ISNV_NO_ALN_I94);
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setIsMissing_Alien_and_I94_data(true);
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.IMMIGRATION_STATUS, ClockNameEnum.IMMIGRATION_90);
		drools.setFocus("EPP_IMIG_4_AG");
		logger.debug("Rule : EPP_Immigration_2V1_3 : End");
end

rule "EPP_Immigration_2V1_4"
salience 9980
activation-group "EPP_IMIG_2V1_AT"
agenda-group "EPP_IMIG_2V1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														!isCSVLPOverride,
														isMissing_Alien_and_I94_data,
														isImigVerificationNoticeSent,
														!isimigClockExpired);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2V1_4 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V1_4");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.ISNV_NO_ALN_I94);
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setIsMissing_Alien_and_I94_data(true);
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.IMMIGRATION_STATUS, ClockNameEnum.IMMIGRATION_90);
		drools.setFocus("EPP_IMIG_4_AG");
		logger.debug("Rule : EPP_Immigration_2V1_4 : End");
end

rule "EPP_Immigration_2V1_5"
salience 9975
activation-group "EPP_IMIG_2V1_AT"
agenda-group "EPP_IMIG_2V1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														!isCSVLPOverride,
														isMissing_Alien_and_I94_data,
														isImigVerificationNoticeSent,
														isimigClockExpired);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2V1_5 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V1_5");
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setEppNonCompInd(Boolean.TRUE);
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, program_status.INELIGIBLE, ProgramReasonCode.ISNV_NO_ALN_I94_90);
		drools.setFocus("EPP_IMIG_4_AG");
		logger.debug("Rule : EPP_Immigration_2V1_5 : End");
end

//Added for CRR 1234 for usecase 7
rule "EPP_Immigration_2V1_5A"
salience 9974
activation-group "EPP_IMIG_2V1_AT"
agenda-group "EPP_IMIG_2V1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														!isCSVLPOverride,
														!isMissing_Alien_and_I94_data,
														!isImigVerificationNoticeSent);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2V1_5A : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V1_5A");
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.IMMIGRATION_STATUS, ClockNameEnum.IMMIGRATION_90);
		if(HXUtility.isTrue($eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).getIsStartClockNoNoticeInd())) 
		{
			// Need to trigger Schedule 90 Day notice Trigger
			$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.ISNV_S1);
			$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V1_5A_1");
		}
		else if(!HXUtility.isTrue($eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).getIsStartClockNoNoticeInd())) 
		{
			// Need to trigger Schedule Verification Notice Trigger & Schedule 90 Day notice Trigger
			$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.ISNV);	
			$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V1_5A_2");	
		}		
		drools.setFocus("EPP_IMIG_4_AG");
		logger.debug("Rule : EPP_Immigration_2V1_5A : End");
end

//Added for CRR 1234 for usecase 7
rule "EPP_Immigration_2V1_5B"
salience 9973
activation-group "EPP_IMIG_2V1_AT"
agenda-group "EPP_IMIG_2V1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														!isCSVLPOverride,
														!isMissing_Alien_and_I94_data,
														!isStartClockNoNoticeInd,
														isCurrentStep2DataInd,
														isImigVerificationNoticeSent,
														!isimigClockExpired);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2V1_5B : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V1_5B");
		//$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setEppNonCompInd(Boolean.TRUE);
		$eDeterminationfacts.resetClock(ProgramCode.EPP, EligibilityVerificationTypeEnum.IMMIGRATION_STATUS, ClockNameEnum.IMMIGRATION_90);
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.ISNV);
		drools.setFocus("EPP_IMIG_4_AG");
		logger.debug("Rule : EPP_Immigration_2V1_5B : End");
end

//Added for CRR 1234 for usecase 7
rule "EPP_Immigration_2V1_5C"
salience 9971
activation-group "EPP_IMIG_2V1_AT"
agenda-group "EPP_IMIG_2V1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														!isCSVLPOverride,
														!isMissing_Alien_and_I94_data,
														isImigVerificationNoticeSent,
														!isimigClockExpired);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2V1_5C : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V1_5C");
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.IMMIGRATION_STATUS, ClockNameEnum.IMMIGRATION_90);
		if(HXUtility.isTrue($eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).getIsStartClockNoNoticeInd())) 
		{
			// Need to trigger Schedule 90 Day notice Trigger
			$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.ISNV_S1);
			$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V1_5C_1");
		} else if(!HXUtility.isTrue($eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).getIsStartClockNoNoticeInd())) 
		{
			// Need to trigger Schedule Verification Notice Trigger & Schedule 90 Day notice Trigger
			$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.ISNV);	
			$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V1_5C_2");	
		}
		drools.setFocus("EPP_IMIG_4_AG");
		logger.debug("Rule : EPP_Immigration_2V1_5C : End");
end

rule "EPP_Immigration_2V1_6"
salience 9970
activation-group "EPP_IMIG_2V1_AT"
agenda-group "EPP_IMIG_2V1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														!isCSVLPOverride,
														!(isMissing_Alien_and_I94_data),
														isImigVerificationNoticeSent,
														isimigClockExpired
														);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2V1_6 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V1_6");
		if(HXUtility.isTrue($eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).getIsStartClockNoNoticeInd())) 
		{
			// Need to trigger Schedule 90 Day notice Trigger
			$eDeterminationfacts.updateProgram(ProgramCode.EPP, program_status.INELIGIBLE, ProgramReasonCode.ISNV_S1_90);
			$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V1_6_1");
		} else if(!HXUtility.isTrue($eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).getIsStartClockNoNoticeInd())) 
		{
			// Need to trigger Schedule Verification Notice Trigger & Schedule 90 Day notice Trigger
			$eDeterminationfacts.updateProgram(ProgramCode.EPP, program_status.INELIGIBLE, ProgramReasonCode.ISNVP_90);
			$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V1_6_2");
				
		}
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setEppNonCompInd(Boolean.TRUE);
		drools.setFocus("EPP_IMIG_4_AG");
		logger.debug("Rule : EPP_Immigration_2V1_6 : End");
end

/*added by gopi as per conversation with das*/
//EPP Immigration(2) - Version2
//flow 2->incar
rule "EPP_Immigration_2V2_1"
salience 9495
activation-group "EPP_IMIG_2V2_AT"
agenda-group "EPP_IMIG_2V2_AG"
when
	//<CONDITION>
	$eDeterminationfacts : EEDeterminationRuleFacts(isProposedElgForRenewal);
then
	//<ACTIONS>
	logger.debug("Rule : EPP_Immigration_2V2_1 : Begin");
	$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V2_1");
	$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setManualRenewalInd(Boolean.TRUE);
	$eDeterminationfacts.updateProgram(ProgramCode.EPP,program_status.INELIGIBLE, ProgramReasonCode.MRR);
	drools.setFocus("EPP_INCAR_1_AG");
	logger.debug("Rule : EPP_Immigration_2V2_1 : End");
end

rule "EPP_Immigration_2V2_2"
salience 9490
activation-group "EPP_IMIG_2V2_AT"
agenda-group "EPP_IMIG_2V2_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														isCSVLPOverride);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2V2_2 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V2_2");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, program_status.INELIGIBLE, ProgramReasonCode.VDSNLP);
		drools.setFocus("EPP_INCAR_1_AG");
		logger.debug("Rule : EPP_Immigration_2V2_2 : End");
end

rule "EPP_Immigration_2V2_3"
salience 9485
activation-group "EPP_IMIG_2V2_AT"
agenda-group "EPP_IMIG_2V2_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														!isCSVLPOverride,
														isMissing_Alien_and_I94_data,
														!isImigVerificationNoticeSent);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2V2_3 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V2_3");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.ISNV_NO_ALN_I94);
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setIsMissing_Alien_and_I94_data(true);
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.IMMIGRATION_STATUS, ClockNameEnum.IMMIGRATION_90);
		drools.setFocus("EPP_INCAR_1_AG");
		logger.debug("Rule : EPP_Immigration_2V2_3 : End");
end

rule "EPP_Immigration_2V2_4"
salience 9480
activation-group "EPP_IMIG_2V2_AT"
agenda-group "EPP_IMIG_2V2_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														!isCSVLPOverride,
														isMissing_Alien_and_I94_data,
														isImigVerificationNoticeSent,
														!isimigClockExpired);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2V2_4 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V2_4");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.ISNV_NO_ALN_I94);
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setIsMissing_Alien_and_I94_data(true);
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.IMMIGRATION_STATUS, ClockNameEnum.IMMIGRATION_90);
		drools.setFocus("EPP_INCAR_1_AG");
		logger.debug("Rule : EPP_Immigration_2V2_4 : End");
end

rule "EPP_Immigration_2V2_5"
salience 9475
activation-group "EPP_IMIG_2V2_AT"
agenda-group "EPP_IMIG_2V2_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														!isCSVLPOverride,
														isMissing_Alien_and_I94_data,
														isImigVerificationNoticeSent,
														isimigClockExpired);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2V2_5 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V2_5");
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setEppNonCompInd(Boolean.TRUE);
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, program_status.INELIGIBLE, ProgramReasonCode.ISNV_NO_ALN_I94_90);
		drools.setFocus("EPP_INCAR_1_AG");
		logger.debug("Rule : EPP_Immigration_2V2_5 : End");
end

//Added for the defect773443, rule for CRR 1234 for usecase 7
rule "EPP_Immigration_2V2_5A"
salience 9474
activation-group "EPP_IMIG_2V2_AT"
agenda-group "EPP_IMIG_2V2_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														!isCSVLPOverride,
														!isMissing_Alien_and_I94_data,
														!isImigVerificationNoticeSent);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2V2_5A : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V2_5A");
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.IMMIGRATION_STATUS, ClockNameEnum.IMMIGRATION_90);
		if(HXUtility.isTrue($eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).getIsStartClockNoNoticeInd())) 
		{
			// Need to trigger Schedule 90 Day notice Trigger
			$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.ISNV_S1);
			$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V2_5A_1");
		}
		else if(!HXUtility.isTrue($eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).getIsStartClockNoNoticeInd())) 
		{
			// Need to trigger Schedule Verification Notice Trigger & Schedule 90 Day notice Trigger
			$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.ISNV);	
			$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V2_5A_2");	
		}		
		drools.setFocus("EPP_INCAR_1_AG");
		logger.debug("Rule : EPP_Immigration_2V2_5A : End");
end

//Added for the defect773443, rule for CRR 1234 for usecase 7
rule "EPP_Immigration_2V2_5B"
salience 9473
activation-group "EPP_IMIG_2V2_AT"
agenda-group "EPP_IMIG_2V2_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														!isCSVLPOverride,
														!isMissing_Alien_and_I94_data,
														!isStartClockNoNoticeInd,
														isCurrentStep2DataInd,
														isImigVerificationNoticeSent,
														!isimigClockExpired);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2V2_5B : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V2_5B");
		//$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setEppNonCompInd(Boolean.TRUE);
		$eDeterminationfacts.resetClock(ProgramCode.EPP, EligibilityVerificationTypeEnum.IMMIGRATION_STATUS, ClockNameEnum.IMMIGRATION_90);
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.ISNV);
		drools.setFocus("EPP_INCAR_1_AG");
		logger.debug("Rule : EPP_Immigration_2V2_5B : End");
end

//Added for the defect773443, rule for CRR 1234 for usecase 7
rule "EPP_Immigration_2V2_5C"
salience 9471
activation-group "EPP_IMIG_2V2_AT"
agenda-group "EPP_IMIG_2V2_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														!isCSVLPOverride,
														!isMissing_Alien_and_I94_data,
														isImigVerificationNoticeSent,
														!isimigClockExpired);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2V2_5C : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V2_5C");
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.IMMIGRATION_STATUS, ClockNameEnum.IMMIGRATION_90);
		if(HXUtility.isTrue($eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).getIsStartClockNoNoticeInd())) 
		{
			// Need to trigger Schedule 90 Day notice Trigger
			$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.ISNV_S1);
			$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V2_5C_1");
		} else if(!HXUtility.isTrue($eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).getIsStartClockNoNoticeInd())) 
		{
			// Need to trigger Schedule Verification Notice Trigger & Schedule 90 Day notice Trigger
			$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.ISNV);	
			$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V2_5C_2");	
		}
		drools.setFocus("EPP_INCAR_1_AG");
		logger.debug("Rule : EPP_Immigration_2V2_5C : End");
end

rule "EPP_Immigration_2V2_6"
salience 9470
activation-group "EPP_IMIG_2V2_AT"
agenda-group "EPP_IMIG_2V2_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														!isCSVLPOverride,
														!isImigVerificationNoticeSent);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2V2_6 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V2_6");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.ISNV);
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.IMMIGRATION_STATUS, ClockNameEnum.IMMIGRATION_90);	
		drools.setFocus("EPP_INCAR_1_AG");
		logger.debug("Rule : EPP_Immigration_2V2_6 : End");
end

rule "EPP_Immigration_2V2_7"
salience 9465
activation-group "EPP_IMIG_2V2_AT"
agenda-group "EPP_IMIG_2V2_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														!isCSVLPOverride,
														isImigVerificationNoticeSent,
														!isimigClockExpired);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2V2_7 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V2_7");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.ISNV);
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.IMMIGRATION_STATUS, ClockNameEnum.IMMIGRATION_90);	
		drools.setFocus("EPP_INCAR_1_AG");
		logger.debug("Rule : EPP_Immigration_2V2_7 : End");
end

rule "EPP_Immigration_2V2_8"
salience 9460
activation-group "EPP_IMIG_2V2_AT"
agenda-group "EPP_IMIG_2V2_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														!isCSVLPOverride,
														(isImigVerificationNoticeSent),
														(isimigClockExpired));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2V2_8 : Begin");		
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2V2_8");
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setEppNonCompInd(Boolean.TRUE);
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, program_status.INELIGIBLE, ProgramReasonCode.ISNVP_90);
		drools.setFocus("EPP_INCAR_1_AG");
		logger.debug("Rule : EPP_Immigration_2V2_8 : End");
end


//EPP Immigration(2B)
rule "EPP_Immigration_2B_1"
salience 68000
activation-group "EPP_IMIG_2B_AT"
agenda-group "EPP_IMIG_2B_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(isProposedElgForRenewal);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2B_1 : Begin");		
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2B_1");
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setManualRenewalInd(Boolean.TRUE);
		$eDeterminationfacts.updateProgram(ProgramCode.EPP,program_status.INELIGIBLE, ProgramReasonCode.MRR);
		drools.setFocus("EPP_INCAR_1_AG");
		logger.debug("Rule : EPP_Immigration_2B_1 : End");
end

rule "EPP_Immigration_2B_2"
salience 67995
activation-group "EPP_IMIG_2B_AT"
agenda-group "EPP_IMIG_2B_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														!isCitiDiscrepancyVerificationNoticeSent);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2B_2 : Begin");		
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2B_2");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.CD_IMMIG);
		//TO DO
		//Schedule Verification Notice Trigger
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.CITIZENSHIP_DISCREPANCY, ClockNameEnum.CITIZENSHIP_DISCREPANCY_90);
		drools.setFocus("EPP_INCAR_1_AG");
		logger.debug("Rule : EPP_Immigration_2B_2 : End");
end

rule "EPP_Immigration_2B_3"
salience 67990
activation-group "EPP_IMIG_2B_AT"
agenda-group "EPP_IMIG_2B_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														isCitiDiscrepancyVerificationNoticeSent,
														!isCitiDiscrepancyClockExpired);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2B_3 : Begin");		
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.CD_IMMIG);
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.CITIZENSHIP_DISCREPANCY, ClockNameEnum.CITIZENSHIP_DISCREPANCY_90);
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2B_3");
		drools.setFocus("EPP_INCAR_1_AG");
		logger.debug("Rule : EPP_Immigration_2B_3 : End");
end

rule "EPP_Immigration_2B_4"
salience 67980
activation-group "EPP_IMIG_2B_AT"
agenda-group "EPP_IMIG_2B_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														isCitiDiscrepancyVerificationNoticeSent,
														isCitiDiscrepancyClockExpired);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2B_4 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2B_4");
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setEppNonCompInd(Boolean.TRUE);
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, program_status.INELIGIBLE, ProgramReasonCode.CDP_90_IMMIG);
		drools.setFocus("EPP_INCAR_1_AG");
		logger.debug("Rule : EPP_Immigration_2B_4 : End");
end



//CR1455 Changes Start

//EPP Immigration(2C)
rule "EPP_Immigration_2C_1"
salience 68000
activation-group "EPP_IMIG_2C_AT"
agenda-group "EPP_IMIG_2C_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(isProposedElgForRenewal);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2C_1 : Begin");		
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2B_1");
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setManualRenewalInd(Boolean.TRUE);
		$eDeterminationfacts.updateProgram(ProgramCode.EPP,program_status.INELIGIBLE, ProgramReasonCode.MRR);
		drools.setFocus("EPP_INCAR_1_AG");
		logger.debug("Rule : EPP_Immigration_2C_1 : End");
end

rule "EPP_Immigration_2C_2"
salience 67995
activation-group "EPP_IMIG_2C_AT"
agenda-group "EPP_IMIG_2C_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														!isVLPGrantDateAvailable,
														!isImigGrantDateVerificationNoticeSent);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2C_2 : Begin");		
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2C_2");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.ISNV_GD);
		//TO DO
		//Schedule Verification Notice Trigger
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.IMMG_GRANTDATE, ClockNameEnum.IMMG_GRANTDATE_90);
		drools.setFocus("EPP_INCAR_1_AG");
		logger.debug("Rule : EPP_Immigration_2C_2 : End");
end

rule "EPP_Immigration_2C_3"
salience 67990
activation-group "EPP_IMIG_2C_AT"
agenda-group "EPP_IMIG_2C_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														isImigGrantDateVerificationNoticeSent,
														!isImigGrantDateClockExpired);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2C_3 : Begin");		
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.ISNV_GD);
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.IMMG_GRANTDATE, ClockNameEnum.IMMG_GRANTDATE_90);
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2C_3");
		drools.setFocus("EPP_INCAR_1_AG");
		logger.debug("Rule : EPP_Immigration_2C_3 : End");
end

rule "EPP_Immigration_2C_4"
salience 67980
activation-group "EPP_IMIG_2C_AT"
agenda-group "EPP_IMIG_2C_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														isImigGrantDateVerificationNoticeSent,
														isImigGrantDateClockExpired);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_2C_4 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_2C_4");
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setEppNonCompInd(Boolean.TRUE);
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, program_status.INELIGIBLE, null);
		$eDeterminationfacts.updateReasonCodeToEPPandEPPAliessa(ProgramReasonCode.ISNV_GD_90);
		drools.setFocus("EPP_INCAR_1_AG");
		logger.debug("Rule : EPP_Immigration_2C_4 : End");
end






//EPP Immigration(3)
//flow : 3-->4->2b->6(exit)
rule "EPP_Immigration_3_1"
salience 56000
activation-group "EPP_IMIG_3_AT"
agenda-group "EPP_IMIG_3_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isFiveYearBarApplies);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_3_1 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_3_1");
		drools.setFocus("EPP_IMIG_4_AG");
	    logger.debug("Rule : EPP_Immigration_3_1 : End");
end


 
rule "EPP_Immigration_3_2"
salience 55997
activation-group "EPP_IMIG_3_AT"
agenda-group "EPP_IMIG_3_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(isFiveYearBarApplies,
														!HXConstants.HIX_5YEAR_BAR_MET_Y.equals(hix5YearBanMet),
														!isVLPGrantDateAvailable,
														HXConstants.INDICATOR_YES.equals(dhsAutoTriggerStepTwo));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_3_2 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_3_2");
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setStartClockNoNoticeInd(Boolean.TRUE);
		drools.setFocus("EPP_IMIG_2V2_AG");
		drools.setFocus("EPP_IMIG_4_AG");
		logger.debug("Rule : EPP_Immigration_3_2 : End");
end


rule "EPP_Immigration_3_3"
salience 55996
activation-group "EPP_IMIG_3_AT"
agenda-group "EPP_IMIG_3_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(isFiveYearBarApplies,
														!HXConstants.HIX_5YEAR_BAR_MET_Y.equals(hix5YearBanMet),
														!isVLPGrantDateAvailable,
														(HXUtility.isNull(dhsAutoTriggerStepTwo) || HXConstants.INDICATOR_NO.equals(dhsAutoTriggerStepTwo)));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_3_3 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_3_3");
		drools.setFocus("EPP_IMIG_2C_AG");
		drools.setFocus("EPP_IMIG_4_AG");
		logger.debug("Rule : EPP_Immigration_3_3 : End");
end

/*
rule "EPP_Immigration_3_4"
salience 55995
activation-group "EPP_IMIG_3_AT"
agenda-group "EPP_IMIG_3_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(isFiveYearBarApplies,
														HXConstants.HIX_5YEAR_BAR_MET_P.equals(hix5YearBanMet),
														!isVLPGrantDateAvailable);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_3_4 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_3_4");
		drools.setFocus("EPP_IMIG_2C_AG");
		drools.setFocus("EPP_IMIG_4_AG");
		logger.debug("Rule : EPP_Immigration_3_4 : End");
end
*/

rule "EPP_Immigration_3_5"
salience 55993
activation-group "EPP_IMIG_3_AT"
agenda-group "EPP_IMIG_3_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(isFiveYearBarApplies,
														isVLPGrantDateAvailable);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_3_5 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_3_5");
		drools.setFocus("EPP_IMIG_4_AG");
		logger.debug("Rule : EPP_Immigration_3_5 : End");
end
//CR1455 Changes End


//EPP Immigration (4)

rule "EPP_Immigration_4_1"
salience 54000
activation-group "EPP_IMIG_4_AT"
agenda-group "EPP_IMIG_4_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(HXConstants.INDICATOR_YES.equals(vlpUSCitizenCode));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_4_1 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_4_1");
		drools.setFocus("EPP_IMIG_2B_AG");
		logger.debug("Rule : EPP_Immigration_4_1 : End");
end

rule "EPP_Immigration_4_2"
salience 53995
activation-group "EPP_IMIG_4_AT"
agenda-group "EPP_IMIG_4_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!HXConstants.INDICATOR_YES.equals(vlpUSCitizenCode));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Immigration_4_2 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Immigration_4_2");
		drools.setFocus("EPP_INCAR_1_AG");
		logger.debug("Rule : EPP_Immigration_4_2 : End");
end



//EPP Incarceration(1)

rule "EPP_Incarceration_1_1"
salience 8000
activation-group "EPP_INCAR_1_AT"
agenda-group "EPP_INCAR_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isHXIncarcerated, 
														!isNonIncarcerationVerified,
														!selfIdentifiedIncarcerationInCurrentApp);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_1_1 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_1_1");
		//drools.setFocus("EPP_INCAR_3_AG");
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_1_1 : End");
end

rule "EPP_Incarceration_1_2"
salience 7990
activation-group "EPP_INCAR_1_AT"
agenda-group "EPP_INCAR_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isHXIncarcerated,
														selfIdentifiedIncarcerationInCurrentApp);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_1_2 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_1_2");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, program_status.INELIGIBLE, ProgramReasonCode.ICVSI);
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_1_2 : End");
end

rule "EPP_Incarceration_1_3"
salience 7980
activation-group "EPP_INCAR_1_AT"
agenda-group "EPP_INCAR_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isHXIncarcerated, 
														isNonIncarcerationVerified,
														!selfIdentifiedIncarcerationInCurrentApp);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_1_3 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_1_3");
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_1_3 : End");
end

rule "EPP_Incarceration_1_4"
salience 7975
activation-group "EPP_INCAR_1_AT"
agenda-group "EPP_INCAR_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isHXIncarcerated);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_1_4 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_1_4");
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_1_4 : End");
end


rule "EPP_Incarceration_1_5"
salience 7970
activation-group "EPP_INCAR_1_AT"
agenda-group "EPP_INCAR_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(isHXIncarcerated,
														doesUserAgreeIncarceration);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_1_5 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_1_5");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, program_status.INELIGIBLE, ProgramReasonCode.ICUA);
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_1_5 : End");
end

rule "EPP_Incarceration_1_6"
salience 7965
activation-group "EPP_INCAR_1_AT"
agenda-group "EPP_INCAR_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(isHXIncarcerated,
														!doesUserAgreeIncarceration,
														isProposedElgForRenewal);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_1_6 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_1_6");
		//$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setManualRenewalInd(Boolean.TRUE);
		//$eDeterminationfacts.updateProgram(ProgramCode.EPP,program_status.INELIGIBLE, ProgramReasonCode.MRR);
		$eDeterminationfacts.updateProgram(ProgramCode.EPP,program_status.INELIGIBLE, ProgramReasonCode.IAR);
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_1_6 : End");
end

rule "EPP_Incarceration_1_7"
salience 7960
activation-group "EPP_INCAR_1_AT"
agenda-group "EPP_INCAR_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(isHXIncarcerated,
														!doesUserAgreeIncarceration,
														!isProposedElgForRenewal,
														!isNonIncarcerationVerified,
														!isUserIncarcerationResponseNull);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_1_7 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_1_7");
		drools.setFocus("EPP_INCAR_2_AG");
		logger.debug("Rule : EPP_Incarceration_1_7 : End");
end

rule "EPP_Incarceration_1_8"
salience 7955
activation-group "EPP_INCAR_1_AT"
agenda-group "EPP_INCAR_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(isHXIncarcerated,
														!doesUserAgreeIncarceration,
														!isProposedElgForRenewal,
														!isNonIncarcerationVerified,
														isUserIncarcerationResponseNull);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_1_8 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_1_8");
		drools.setFocus("EPP_INCAR_5_AG");
		logger.debug("Rule : EPP_Incarceration_1_8 : End");
end

rule "EPP_Incarceration_1_9"
salience 7950
activation-group "EPP_INCAR_1_AT"
agenda-group "EPP_INCAR_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(isHXIncarcerated,
														!doesUserAgreeIncarceration,
														!isProposedElgForRenewal,
														isNonIncarcerationVerified);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_1_9 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_1_9");
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_1_9 : End");
end


//EPP Incarceration(2)

rule "EPP_Incarceration_2_1"
salience 7000
activation-group "EPP_INCAR_2_AT"
agenda-group "EPP_INCAR_2_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(fedIncarcerationStatus,
														!(isIncarceration_90_NoticeSent));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_2_1 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_2_1");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.IC);
		//TO DO
		//Schedule Verification Notice Trigger				
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.INCARCERATION_STATUS, ClockNameEnum.INCARCERATION_90);
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_2_1 : End");
end

rule "EPP_Incarceration_2_2"
salience 6990
activation-group "EPP_INCAR_2_AT"
agenda-group "EPP_INCAR_2_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(fedIncarcerationStatus,
														(isIncarceration_90_NoticeSent),
														!(isIncarceration90ClockExpired));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_2_2 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_2_2");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.IC);
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.INCARCERATION_STATUS, ClockNameEnum.INCARCERATION_90);
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_2_2 : End");
end

rule "EPP_Incarceration_2_3"
salience 6980
activation-group "EPP_INCAR_2_AT"
agenda-group "EPP_INCAR_2_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(fedIncarcerationStatus,
														(isIncarceration_90_NoticeSent),
														(isIncarceration90ClockExpired));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_2_3 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_2_3");
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setEppNonCompInd(Boolean.TRUE);
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, program_status.INELIGIBLE, ProgramReasonCode.IC_90);
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_2_3 : End");
end

rule "EPP_Incarceration_2_4"
salience 6970
activation-group "EPP_INCAR_2_AT"
agenda-group "EPP_INCAR_2_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!fedIncarcerationStatus,
														!(is1DayRerunSet));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_2_4 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_2_4");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, program_status.PENDING, ProgramReasonCode.IC);
		//TO DO
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.INCARCERATION_STATUS, ClockNameEnum.INCARCERATION_1);
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_2_4 : End");
end

rule "EPP_Incarceration_2_5"
salience 6960
activation-group "EPP_INCAR_2_AT"
agenda-group "EPP_INCAR_2_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!fedIncarcerationStatus,
														(is1DayRerunSet),
														!(is1DayRerunExpired));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_2_5 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_2_5");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, program_status.PENDING, ProgramReasonCode.IC);
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.INCARCERATION_STATUS, ClockNameEnum.INCARCERATION_1);
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_2_5 : End");
end

rule "EPP_Incarceration_2_6"
salience 6950
activation-group "EPP_INCAR_2_AT"
agenda-group "EPP_INCAR_2_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!fedIncarcerationStatus,
														(is1DayRerunSet),
														(is1DayRerunExpired),
														!(isIncarceration_90_NoticeSent),
														!(isHXIncarcerated));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_2_6 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_2_6");
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_2_6 : End");
end

rule "EPP_Incarceration_2_7"
salience 6945
activation-group "EPP_INCAR_2_AT"
agenda-group "EPP_INCAR_2_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!fedIncarcerationStatus,
														(is1DayRerunSet),
														(is1DayRerunExpired),
														!(isIncarceration_90_NoticeSent),
														(isHXIncarcerated));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_2_7 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_2_7");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.IC);
		//TO DO
		//Schedule Verification Notice Trigger				
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.INCARCERATION_STATUS, ClockNameEnum.INCARCERATION_90);
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_2_7 : End");
end

rule "EPP_Incarceration_2_8"
salience 6940
activation-group "EPP_INCAR_2_AT"
agenda-group "EPP_INCAR_2_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!fedIncarcerationStatus,
														(is1DayRerunSet),
														(is1DayRerunExpired),
														(isIncarceration_90_NoticeSent),
														!(isIncarceration90ClockExpired));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_2_8 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_2_8");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.IC);
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.INCARCERATION_STATUS, ClockNameEnum.INCARCERATION_90);
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_2_8 : End");
end

rule "EPP_Incarceration_2_9"
salience 6935
activation-group "EPP_INCAR_2_AT"
agenda-group "EPP_INCAR_2_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!fedIncarcerationStatus,
														(is1DayRerunSet),
														(is1DayRerunExpired),
														(isIncarceration_90_NoticeSent),
														(isIncarceration90ClockExpired));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_2_9 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_2_9");
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setEppNonCompInd(Boolean.TRUE);
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, program_status.INELIGIBLE, ProgramReasonCode.IC_90);
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_2_9 : End");
end

// EPP Incarceration (3)


rule "EPP_Incarceration_3_1"
salience 5000
activation-group "EPP_INCAR_3_AT"
agenda-group "EPP_INCAR_3_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isIncarceration_SelfIdentified_90_NoticeSent,
														!isIncarcerationSelfIdentified90ClockExpired);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_3_1 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_3_1");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.IC_90_VN);
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.INCARCERATION_STATUS, ClockNameEnum.INCARCERATION_90);
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_3_1 : End");
end


rule "EPP_Incarceration_3_2"
salience 4090
activation-group "EPP_INCAR_3_AT"
agenda-group "EPP_INCAR_3_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(isIncarceration_SelfIdentified_90_NoticeSent,
														!isIncarcerationSelfIdentified90ClockExpired);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_3_2 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_3_2");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.IC_90_VN);
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.INCARCERATION_STATUS, ClockNameEnum.INCARCERATION_90);
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_3_2 : End");
end


rule "EPP_Incarceration_3_3"
salience 4080
activation-group "EPP_INCAR_3_AT"
agenda-group "EPP_INCAR_3_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(isIncarceration_SelfIdentified_90_NoticeSent,
														isIncarcerationSelfIdentified90ClockExpired);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_3_3 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_3_3");
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setEppNonCompInd(Boolean.TRUE);
		$eDeterminationfacts.updateProgram(ProgramCode.EPP,program_status.INELIGIBLE, ProgramReasonCode.ICVSIP_90);
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_3_3 : End");
end



// EPP Incarceration (5)
rule "EPP_Incarceration_5_1"
salience 16000
activation-group "EPP_INCAR_5_AT"
agenda-group "EPP_INCAR_5_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(fedIncarcerationStatus,
														!isIncarceration_30_DayNoticeSent);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_5_1 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_5_1");
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.INCARCERATION_STATUS, ClockNameEnum.INCARCERATION_30);
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_5_1 : End");
end

rule "EPP_Incarceration_5_2"
salience 15990
activation-group "EPP_INCAR_5_AT"
agenda-group "EPP_INCAR_5_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(fedIncarcerationStatus,
														isIncarceration_30_DayNoticeSent,
														!isIncarceration_30_DayClockExpired);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_5_2 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_5_2");
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.INCARCERATION_STATUS, ClockNameEnum.INCARCERATION_30);
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_5_2 : End");
end

rule "EPP_Incarceration_5_3"
salience 15980
activation-group "EPP_INCAR_5_AT"
agenda-group "EPP_INCAR_5_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(fedIncarcerationStatus,
														isIncarceration_30_DayNoticeSent,
														isIncarceration_30_DayClockExpired);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_5_3 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_5_3");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, program_status.INELIGIBLE, ProgramReasonCode.IC);
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setEppNonCompInd(Boolean.TRUE);
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_5_3 : End");
end

rule "EPP_Incarceration_5_4"
salience 15970
activation-group "EPP_INCAR_5_AT"
agenda-group "EPP_INCAR_5_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!fedIncarcerationStatus,
														!is1DayRerunSet);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_5_4 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_5_4");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, program_status.PENDING, ProgramReasonCode.IC_30_VN);
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.INCARCERATION_STATUS, ClockNameEnum.INCARCERATION_1);
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_5_4 : End");
end

rule "EPP_Incarceration_5_5"
salience 15960
activation-group "EPP_INCAR_5_AT"
agenda-group "EPP_INCAR_5_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!fedIncarcerationStatus,
														is1DayRerunSet,
														!is1DayRerunExpired);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_5_5 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_5_5");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, program_status.PENDING, ProgramReasonCode.IC_30_VN);
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.INCARCERATION_STATUS, ClockNameEnum.INCARCERATION_1);
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_5_5 : End");
end

rule "EPP_Incarceration_5_6"
salience 15950
activation-group "EPP_INCAR_5_AT"
agenda-group "EPP_INCAR_5_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!fedIncarcerationStatus,
														is1DayRerunSet,
														is1DayRerunExpired,
														!isIncarceration_30_DayNoticeSent);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_5_6 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_5_6");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.IC_30_VN);
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.INCARCERATION_STATUS, ClockNameEnum.INCARCERATION_30);
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_5_6 : End");
end

rule "EPP_Incarceration_5_7"
salience 15940
activation-group "EPP_INCAR_5_AT"
agenda-group "EPP_INCAR_5_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!fedIncarcerationStatus,
														is1DayRerunSet,
														is1DayRerunExpired,
														isIncarceration_30_DayNoticeSent,
														!isIncarceration_30_DayClockExpired);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_5_7 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_5_7");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.IC_30_VN);
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.INCARCERATION_STATUS, ClockNameEnum.INCARCERATION_30);
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_5_7 : End");
end

rule "EPP_Incarceration_5_8"
salience 15930
activation-group "EPP_INCAR_5_AT"
agenda-group "EPP_INCAR_5_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!fedIncarcerationStatus,
														is1DayRerunSet,
														is1DayRerunExpired,
														isIncarceration_30_DayNoticeSent,
														isIncarceration_30_DayClockExpired);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Incarceration_5_8 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Incarceration_5_8");
		//$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.INC_CON_NOT_RES);
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, program_status.INELIGIBLE, ProgramReasonCode.INC_CON_NOT_RES);
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setEppNonCompInd(Boolean.TRUE);
		drools.setFocus("EPP_RESID_1_AG");
		logger.debug("Rule : EPP_Incarceration_5_8 : End");
end

// EPP Residency(1)

rule "EPP_Residency_1_1"
salience 6000
activation-group "EPP_RESID_1_AT"
agenda-group "EPP_RESID_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(isResidencyVerified);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Residency_1_1 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Residency_1_1");		
		drools.setFocus("EPP_AIAN_1_AG");
		logger.debug("Rule : EPP_Residency_1_1 : End");
end

rule "EPP_Residency_1_2"
salience 5990
activation-group "EPP_RESID_1_AT"
agenda-group "EPP_RESID_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isResidencyVerified,
														!isMovingToNY);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Residency_1_2 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Residency_1_2");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, program_status.INELIGIBLE, ProgramReasonCode.NNYSR);
		drools.setFocus("EPP_AIAN_1_AG");
		logger.debug("Rule : EPP_Residency_1_2 : End");
end

rule "EPP_Residency_1_3"
salience 5980
activation-group "EPP_RESID_1_AT"
agenda-group "EPP_RESID_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isResidencyVerified,
														isMovingToNY);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_Residency_1_3 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_Residency_1_3");
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, program_status.INELIGIBLE, ProgramReasonCode.NNYSR);
		drools.setFocus("EPP_AIAN_1_AG");
		logger.debug("Rule : EPP_Residency_1_3 : End");
end

// EPP AIAN(1)

rule "EPP_AIAN_1_1"
salience 4000
activation-group "EPP_AIAN_1_AT"
agenda-group "EPP_AIAN_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isAIOrAN);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_AIAN_1_1 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_AIAN_1_1");
		$eDeterminationfacts.setIsAIANSpecialBenefits(Boolean.FALSE);
		$eDeterminationfacts.setRuleExecCompletionStep(ProgramCode.EPP, HXConstants.RULE_EXEC_STEP_SEC2_03);
		logger.debug("Rule : EPP_AIAN_1_1 : End");
end

rule "EPP_AIAN_1_2"
salience 3990
activation-group "EPP_AIAN_1_AT"
agenda-group "EPP_AIAN_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(isAIOrAN,
														!isAIOrANStatusVerified);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_AIAN_1_2 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_AIAN_1_2");
		$eDeterminationfacts.setIsAIANSpecialBenefits(Boolean.FALSE);
		drools.setFocus("EPP_AIAN_2_AG");
		logger.debug("Rule : EPP_AIAN_1_2 : End");
end

rule "EPP_AIAN_1_3"
salience 3980
activation-group "EPP_AIAN_1_AT"
agenda-group "EPP_AIAN_1_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(isAIOrAN,
														isAIOrANStatusVerified);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_AIAN_1_3 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_AIAN_1_3");
		$eDeterminationfacts.setIsAIANSpecialBenefits(Boolean.TRUE);
		$eDeterminationfacts.setRuleExecCompletionStep(ProgramCode.EPP, HXConstants.RULE_EXEC_STEP_SEC2_03);
		logger.debug("Rule : EPP_AIAN_1_3 : End");
end

// EPP AIAN(2)

rule "EPP_AIAN_2_0"
salience 2000
activation-group "EPP_AIAN_2_AT"
agenda-group "EPP_AIAN_2_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(isProposedElgForRenewal);
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_AIAN_2_0 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_AIAN_2_0");		
		$eDeterminationfacts.getElgRulesIndicatorForProgram(ProgramCode.EPP).setManualRenewalInd(Boolean.TRUE);
		$eDeterminationfacts.updateProgram(ProgramCode.EPP,program_status.INELIGIBLE, ProgramReasonCode.MRR);
		$eDeterminationfacts.setRuleExecCompletionStep(ProgramCode.EPP, HXConstants.RULE_EXEC_STEP_SEC2_03);
		logger.debug("Rule : EPP_AIAN_2_0 : End");
end


rule "EPP_AIAN_2_1"
salience 1995
activation-group "EPP_AIAN_2_AT"
agenda-group "EPP_AIAN_2_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														!(isAIOrANVerificationNoticeSent));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_AIAN_2_1 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_AIAN_2_1");		
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.AIANSNV);
		$eDeterminationfacts.setIsAIANSpecialBenefits(Boolean.TRUE);
		//Schedule Verification Notice Trigger
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.AMERICAN_INDIAN, ClockNameEnum.AMERICAN_INDIAN_90);
		$eDeterminationfacts.setRuleExecCompletionStep(ProgramCode.EPP, HXConstants.RULE_EXEC_STEP_SEC2_03);
		logger.debug("Rule : EPP_AIAN_2_1 : End");
end

rule "EPP_AIAN_2_2"
salience 1990
activation-group "EPP_AIAN_2_AT"
agenda-group "EPP_AIAN_2_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														(isAIOrANVerificationNoticeSent),
														!(isAIOrANClockExpired));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_AIAN_2_2 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_AIAN_2_2");
		$eDeterminationfacts.setIsAIANSpecialBenefits(Boolean.TRUE);
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.AIANSNV);
		$eDeterminationfacts.setClocks(ProgramCode.EPP, EligibilityVerificationTypeEnum.AMERICAN_INDIAN, ClockNameEnum.AMERICAN_INDIAN_90);
		$eDeterminationfacts.setRuleExecCompletionStep(ProgramCode.EPP, HXConstants.RULE_EXEC_STEP_SEC2_03);
		logger.debug("Rule : EPP_AIAN_2_2 : End");
end

rule "EPP_AIAN_2_3"
salience 1980
activation-group "EPP_AIAN_2_AT"
agenda-group "EPP_AIAN_2_AG"
	when
		//<CONDITION>
		$eDeterminationfacts : EEDeterminationRuleFacts(!isProposedElgForRenewal,
														(isAIOrANVerificationNoticeSent),
														(isAIOrANClockExpired));
	then
		//<ACTIONS>
		logger.debug("Rule : EPP_AIAN_2_3 : Begin");
		$eDeterminationfacts.updateRuleExec(ProgramCode.EPP, "EPP_AIAN_2_3");		
		$eDeterminationfacts.updateProgram(ProgramCode.EPP, ProgramReasonCode.AIANSNV_90);
		$eDeterminationfacts.setIsAIANSpecialBenefits(Boolean.FALSE);
		$eDeterminationfacts.setRuleExecCompletionStep(ProgramCode.EPP, HXConstants.RULE_EXEC_STEP_SEC2_03);
		logger.debug("Rule : EPP_AIAN_2_3 : End");
end